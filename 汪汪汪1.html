<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ğŸ¶ æ— è¿ç»­~~ç‹—è¯­ç¿»è¯‘å™¨</title>
<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;background:#fff8e1;padding:20px;margin:0}
h1{text-align:center;color:#ff6f00;margin-bottom:25px}
.wrapper{max-width:700px;margin:0 auto;background:#fff;padding:25px;border-radius:12px;box-shadow:0 4px 16px rgba(0,0,0,.15)}
textarea{width:100%;min-height:140px;resize:vertical;border:1px solid #ccc;border-radius:6px;padding:12px;font-size:16px;box-sizing:border-box}
button{width:100%;margin-top:12px;padding:14px;font-size:18px;border:none;border-radius:6px;cursor:pointer;transition:.3s}
.encodeBtn{background:#ff9800;color:#fff}
.encodeBtn:hover{background:#e68900}
.decodeBtn{background:#4caf50;color:#fff}
.decodeBtn:hover{background:#43a047}
.label{font-weight:bold;margin:18px 0 6px;color:#333}
.note{font-size:13px;color:#666;margin-top:6px}
</style>
</head>
<body>
<h1>ğŸ¶ æ— è¿ç»­ ~~ ç‹—è¯­ç¿»è¯‘å™¨ ğŸ¾</h1>
<div class="wrapper">
    <div class="label">äººç±»è¯­è¨€ï¼ˆæ˜æ–‡ï¼‰ï¼š</div>
    <textarea id="humanText" placeholder="è¾“å…¥ä»»æ„æ–‡å­—ï¼Œå¦‚ï¼šä½ å¥½ï¼Œä¸–ç•Œï¼Hello 2025 ğŸ˜Š"></textarea>
    <button class="encodeBtn" onclick="encodeToDog()">åŠ å¯†æˆç‹—è¯­ â–¶</button>

    <div class="label">ç‹—è¯­ï¼ˆå¯†æ–‡ï¼‰ï¼š</div>
    <textarea id="dogText" placeholder="ç‹—è¯­ä¼šå‡ºç°åœ¨è¿™é‡Œï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹åå†è§£å¯†"></textarea>
    <button class="decodeBtn" onclick="decodeToHuman()">â—€ è§£å¯†ä¸ºäººç±»è¯­è¨€</button>

    <div class="note">æç¤ºï¼šä¸ä¼šå‡ºç°è¿ç»­ä¸¤ä¸ªâ€œ~â€ï¼Œæ”¯æŒå…¨éƒ¨ Unicode å­—ç¬¦ã€‚</div>
</div>

<script>
/* æ˜ å°„è¡¨ */
const sym2num = {'å—·':0,'å‘œ':1,'æ±ª':2,'~':3};
const num2sym = ['å—·','å‘œ','æ±ª','~'];

/* å·¥å…·ï¼šUTF-8 å­—èŠ‚ â†” å­—ç¬¦ä¸² */
const strToBytes = (s)=>new TextEncoder().encode(s);
const bytesToStr = (b)=>new TextDecoder().decode(b);

/* å­—èŠ‚ â†’ 5 ä½å››è¿›åˆ¶ä¸²ï¼ˆé«˜ä½è¡¥ 0ï¼‰*/
function byteToBase4Str(b){
    return b.toString(4).padStart(5,'0');   // 0-255 â†’ 00000-33333
}

/* 5 ä½å››è¿›åˆ¶ä¸² â†’ å­—èŠ‚ */
function base4StrToByte(str){
    return parseInt(str,4);
}

/* æŠŠ 5 ä½å››è¿›åˆ¶ä¸² â†’ 3 ä¸ªç¬¦å·ï¼ˆæ¯ç»„ 3 ä½ï¼Œç¬¬ 3 ä½ä¸€å®šä¸ä¸º 3ï¼Œé˜²æ­¢ ~~ï¼‰*/
function base4ToSymbols(str5){
    // å–å‰ 3 ä½æ˜ å°„ç¬¦å·
    const g1 = str5.slice(0,3).split('').map(d=>num2sym[parseInt(d,10)]).join('');
    // å 2 ä½è¡¥ 0 å‡‘ 3 ä½ï¼Œç¬¬ 3 ä½å›ºå®šä¸º 0ï¼ˆé 3ï¼‰
    const g2 = str5.slice(3,5)+'0';
    const g2sym = g2.split('').map(d=>num2sym[parseInt(d,10)]).join('');
    return g1+g2sym;
}

/* ç¬¦å·ä¸² â†’ 5 ä½å››è¿›åˆ¶ä¸² */
function symbolsToBase4(symStr){
    // symStr é•¿åº¦å¿…ä¸º 6
    const part1 = symStr.slice(0,3);
    const part2 = symStr.slice(3,5);   // ç¬¬ 6 ä½å¿½ç•¥
    const digits = (part1+part2).split('').map(ch=>sym2num[ch]).join('');
    return digits.padStart(5,'0');
}

/* åŠ å¯†ï¼šå­—ç¬¦ä¸² â†’ ç‹—è¯­ */
function encodeToDog(){
    const ht = document.getElementById('humanText').value;
    if(!ht){document.getElementById('dogText').value='';return;}
    try{
        const bytes = strToBytes(ht);
        const dogArr = Array.from(bytes).map(b=>base4ToSymbols(byteToBase4Str(b)));
        const dogText = dogArr.join('~å‘œå—·~');
        document.getElementById('dogText').value = dogText;
    }catch(e){
        alert('åŠ å¯†å¤±è´¥ï¼š'+e.message);
    }
}

/* è§£å¯†ï¼šç‹—è¯­ â†’ å­—ç¬¦ä¸² */
function decodeToHuman(){
    const dt = document.getElementById('dogText').value.trim();
    if(!dt){document.getElementById('humanText').value='';return;}
    try{
        const parts = dt.split('~å‘œå—·~');
        const bytes = [];
        for(let p of parts){
            if(p.length!==6) throw new Error('æ¯ç»„ç‹—è¯­é•¿åº¦å¿…é¡»ä¸º 6');
            const base4Str = symbolsToBase4(p);
            bytes.push(base4StrToByte(base4Str));
        }
        document.getElementById('humanText').value = bytesToStr(new Uint8Array(bytes));
    }catch(e){
        alert('è§£å¯†å¤±è´¥ï¼š'+e.message);
    }
}
</script>
</body>
</html>